<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="bootstrap-template/layout/admin-basic">
<th:block layout:fragment="title">
  <title>채팅방</title>
</th:block>

<th:block layout:fragment="main-content">
  <div class="container">
    <div>
      <ul th:each="room : ${list}">
        <li><a th:href="@{/chat/room(roomId=${room.roomId})}">[[${room.name}]]</a></li>
      </ul>
    </div>
  </div>
  <form th:action="@{/chat/room}" method="post">
    <input type="text" name="name" class="form-control">
    <button class="btn btn-secondary" id="btnCreate">개설하기</button>
  </form>
</th:block>


<th:block layout:fragment="script">
  <script th:inline="javascript">
    $(document).ready(function(){

      var roomName = [[${roomName}]];
      console.log('roomName = ' + roomName);

      if(roomName != null)
        alert(roomName + '방이 개설되었습니다.');

      $('#btnCreate').on('click', function (e){
        e.preventDefault();

        var name = $('input[name=name]').val();
        console.log('name = ' + name);
        if(name == '') {
          alert('Please write the name.');
        } else{
          $('form').submit();
        }

      });

    });
  </script>
</th:block>
</html>